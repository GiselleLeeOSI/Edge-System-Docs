<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Generating a template OPC UA data selection configuration file on Windows </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Generating a template OPC UA data selection configuration file on Windows ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../Beta2/index.html" width="46">
                <img id="logo" src="../../Beta2/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="opcUaDataSelectionWindows">
<h1 id="generating-a-template-opc-ua-data-selection-configuration-file-on-windows">Generating a template OPC UA data selection configuration file on Windows</h1>

<p>On startup, the OPC UA connectivity browses the entire OPC UA server address space and exports the available OPC UA variables into a .json file for data selection. Data is collected automatically based upon user demands.  OPC UA data from OPC UA variables is read through subscriptions (unsolicited reads).</p>
<p>A default OPC UA data source template file will be created if there is no OPC UA data selection configuration, but a valid OPC UA data source exists.</p>
<p>There are two necessary prerequisites for this template data selection to be generated:</p>
<ol>
<li>Add an <a class="xref" href="../Configuration/EdgeSystemConfiguration.html">OPC UA component</a> with a unique ComponentId. In Beta 2 the system is installed with a single OPC UA component, so unless a second one is desired, this step can be skipped, otherwise restart the Edge System if you are using Beta 2 before proceeding to the next step.</li>
<li>Configure a valid <a class="xref" href="OpcUaOverview.html">OPC UA Data Source</a></li>
</ol>
<p>Once these steps are taken a template OPC UA data selection will be generated in the following directory. For the purpose of this example it is assumed the ComponentId of the OPC UA component is the default OpcUa1:</p>
<pre><code class="lang-cmd">c:\ProgramData\OSIsoft\EdgeSystem\Configuration\OpcUa1_DataSelection.json
</code></pre><p>Copy the file to a different directory to edit it. The contents of the file will look something like:</p>
<pre><code class="lang-json">[
  {
    &quot;Selected&quot;: false,
    &quot;Name&quot;: &quot;Cold Side Inlet Temperature&quot;,
    &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.ColdSideInletTemperature&quot;,
    &quot;StreamId&quot;: null
  },
  {
    &quot;Selected&quot;: false,
    &quot;Name&quot;: &quot;Cold Side Outlet Temperature&quot;,
    &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.ColdSideOutletTemperature&quot;,
    &quot;StreamId&quot;: null
  }
]
</code></pre><p>In a text editor edit the file and change any Selected : false, lines to Selected : true to transfer the OPC UA data to be stored in the Edge System. After that is done, in the same directory where you edited the generated file, run the following curl command:</p>
<pre><code class="lang-bash">curl -i -d &quot;@OpcUa1_DataSelection.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/OpcUa1/Dataselection
</code></pre><p>To see the streams that have been created in Edge Storage to store the data you are writing you can run the following curl script:</p>
<pre><code class="lang-bash">curl http://localhost:5590/api/v1/tenants/default/namespaces/default/streams/
</code></pre><p>To view the data in the streams being written  you can refer to the SDS part of this documentation.</p>
<p>To egress the data to OSIsoft Cloud Services or the PI System, see the egress documentation or quick starts.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-System-Docs/blob/master/Beta2/OpcUa/OpcUaDataSelectionWindows.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
